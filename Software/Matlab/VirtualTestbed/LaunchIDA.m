clc
clear
close all
%
bRegenerateFiles    = false;
bPrintResults       = true;
%
strResultsDestinationFolder = 'TestbedQBuilding';
%
if( bRegenerateFiles );
    WriteIDAFiles;
end;%
%
system('ida I=ida_lisp_new') 
%
if bPrintResults == 1
    %
    fid                                              = fopen(strcat(strResultsDestinationFolder,'/','plant_po.prn'));
    sResults.sPlant_po.afText                        = textscan(fid,'%s', 10);
    sResults.sPlant_po.afFigures(1,:)                = textscan(fid,'%f %f %f %f %f %f %f %f %f ');  
    fclose(fid);

%     fid                                              = fopen(strcat(strResultsDestinationFolder,'/','flow_dia.prn'));
%     sResults.sFlow_dia.afText                        = textscan(fid,'%s', 9);
%     sResults.sFlow_dia.afFigures(1,:)                = textscan(fid,'%f %f %f %f %f %f %f %f ');  
%     fclose(fid);
% 
%     fid                                              = fopen(strcat(strResultsDestinationFolder,'/','iaq.prn'));
%     sResults.sIAQ.afText                             = textscan(fid,'%s', 6);
%     sResults.sIAQ.afFigures(1,:)                     = textscan(fid,'%f %f %f %f %f ');  
%     fclose(fid);

    fid                                              = fopen(strcat(strResultsDestinationFolder,'/','ahu_temp.prn'));
    sResults.sAHU_temp.afText                        = textscan(fid,'%s', 6);
    sResults.sAHU_temp.afFigures(1,:)                = textscan(fid,'%f %f %f %f %f ');  
    fclose(fid);

    fid                                              = fopen(strcat(strResultsDestinationFolder,'/','temperat.prn'));
    sResults.sTemperat.afText                        = textscan(fid,'%s', 5);
    sResults.sTemperat.afFigures(1,:)                = textscan(fid,'%f %f %f %f ');  
    fclose(fid);

%     fid                                              = fopen(strcat(strResultsDestinationFolder,'/','surf_tem.prn'));
%     sResults.sWaldisp( tSignal.afValues )
	lTemperat.afText                    = textscan(fid,'%s', 10);
%     sResults.sWallTemperat.afFigures(1,:)            = textscan(fid,'%f %f %f %f %f %f %f %f %f ');  
%     fclose(fid);

    afTimesteps         = sResults.sTemperat.afFigures{1,1}(1:end-1,1);%sResults.sFlow_dia.afFigures{1,1}(1:end-1,1);
%     afInletVentFlow     = sResults.sFlow_dia.afFigures{1,8}(1:end-1,1);
%     afOutletVentFlow    = sResults.sFlow_dia.afFigures{1,7}(1:end-1,1);
    afIndoorAirTemp     = sResults.sTemperat.afFigures{1,3}(1:end-1,1);
    afIndoorMeanAirTemp = sResults.sTemperat.afFigures{1,4}(1:end-1,1);
%     afXCO2Vol           = sResults.sIAQ.afFigures{1,5}(1:end-1,1);
%     afHeat              = sResults.sPlant_po.afFigures{1,3}(1:end-1,1);
%     afWall              = sResults.sWallTemperat.afFigures{1,iWallsTempIndex }(1:end-1,1);

     iChartNumber = 1;
%     figure(iChartNumber)
%     plot(afTimesteps,afInletVentFlow,'r^--',afTimesteps,afOutletVentFlow,'g*--')
%     title('Ventilation flows')
%     xlabel('Time [h]')
%     ylabel('Air flows, [l/s]')
%     legend('Inlet flow','Outlet flow')
%     print('-dpng','Charts\VentilationFlows')

%     iChartNumber = iChartNumber + 1;
    figure(iChartNumber)
    plot(afTimesteps,afIndoorAirTemp,'ro--')
    title('Indoor air temperature')
    xlabel('Time [h]')
    ylabel('Mean air temperature, [\circ C]')
%     print('-dpng','Charts\IndoorTemp')

%     iChartNumber = iChartNumber + 1;
%     figure(iChartNumber)
%     plot(afTimesteps,afXCO2Vol,'ro--')
%     title('CO_2 concentration')
%     xlabel('Time [h]')
%     ylabel('CO_2 concentration, [ppm]')
%     print('-dpng','Charts\CO2_concentration')
%
end
