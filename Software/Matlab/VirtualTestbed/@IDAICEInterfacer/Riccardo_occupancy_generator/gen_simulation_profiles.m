function [occupancy timings t_change] = gen_simulation_profiles(A,p,N)
% Generate occupancy profiles
% A is a vector with the extremes of the occupancies (e.g. [0 49])
% p is the number of changes
% N is the number of simulation samples
%
% example:
%  gen_simulation_profiles([1 10],16,100)
% generates 16 switches in 100 samples for occupancies between 1 and 10

    t_change = randi(N,p,1);
    t_change = sort(t_change');

    intervals = diff([1 t_change N]);
    timings = linspace(0,1,N);

    occupancy = [];
    for i = intervals
        occupancy = [occupancy randi(A,1,1)*ones(1,i)];
    end
    occupancy = [occupancy(1) occupancy];

end
