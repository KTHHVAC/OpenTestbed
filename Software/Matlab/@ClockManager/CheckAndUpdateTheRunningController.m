% Algorithm:
%
% - afChangingTimes				contains	the list of the times when a controller should be changed
% - astrChangingControllers		contains	the list of the strings corresponding to the various controllers
%
% the current controller is that one for which its changing time is the first one being smaller than the current JD
%
function CheckAndUpdateTheRunningController( tClockManager )
	%
	try %
		%
		strCurrentRunningController = tClockManager.strRunningController;
		%
		fCurrentJulianDate = Time.GetCurrentJulianDate();
		%
		tClockManager.strRunningController =										...
			tClockManager.astrChangingControllers(									...
				find(	tClockManager.afChangingTimes <= fCurrentJulianDate,		...
						1,															...
						'first'													)	);
		%
		if ( strcmp( strCurrentRunningController , tClockManager.strRunningController  ) )
			%
			tClockManager.bNeedOfChangingController = true;
			%
		else%
			%
			tClockManager.bNeedOfChangingController = false;
			%
		end;%
		%	
		%
	catch exception
		%
		disp(exception.message);
		fprintf('Error checking which is the controller that should be running.');
		%
	end;% catch
	%
end %
