%
% ConvertTxtFromWebsite.m
%
% usage:
%
% tDataset = ConvertTxtFromWebsite(                           ...
%                     astrDatabaseFilenames,                  ...
%                     fSamplingPeriodInSeconds,		          ...
%                     strConvertedDatabaseFilename,           ... 
%                     aaiListOfSignalsAndDevicesToBeDiscarded )
%
% convert the data downloaded from the HVAC web site into a matrix which columns
% are resampled and interpolated signals.
% 
% Howto:
% a) download the .txt files from hvac.ee.kth.se
% b) run the method
%
% Inputs:
%
% - astrDatabaseFilenames           array of cells containing the paths of the
%                                   downloaded .txt files
%
% - fSamplingPeriodInSeconds        resampling period
%
% - strConvertedDatabaseFilename    where to save the .mat file of the results
%
% - aaiListOfSignalsAndDevicesToBeDiscarded     matrix containing the signals
%                                               IDs and devices IDs that we want
%                                    to exclude from the conversion. Every row
%                                    is made of two elements: the first the
%                                    signal ID, the second the device ID.
%                                    Example:
%                                               [ 10, 1005 ;
%                                                 50, 3000 ;
%                                                 21, 2002 ]
%                                    There is also the possibility of discarding
%                                    a set of signals, using "-1" that indicates
%                                    "everyone". Example:
%                                               [ 10, -1 ;
%                                                 -1, 2002 ]
%                                    means discard all the signals "10" and all
%                                    the information coming from the device 2002
%
% - bConvertInInteractiveMode       asks the user what she wants to do for
%                                   each signal encountered, printing some info
%
%
% Outputs:
% - tDataset                        a structure containing the following fields:
%
%    - afSignalsTimes               Julian dates of the various samples
%                                   (its size is equal to the number of samples)
%
%    - aafSignalsValues             matrix containing the various signals. Each
%                                   column is a signal. E.g., the 10-th column
%                                   will be a signal with ID aiSignalsIDs(10)
%                                   and coming from the device aiDevicesIDs(10)
%
%    - aafSignalsInaccuracies       matrix containing the inaccuracies of the
%                                   various signals. They indicate how much
%                                   inaccurate the measurement is, and this is
%                                   connected to the degree of interpolation
%                                   required to compute the corresponding
%                                   sample
%
%    - aiSignalsIDs                 list of the signals IDs
%                                   (see https://code.google.com/p/kth-hvac/wiki/DownloadedDataFormat)
%                                   (its size is equal to the number of different signals)
%
%    - astrSignalsDescriptions      string describing each signal
%
%    - aiDevicesIDs                 list of the devices IDs
%                                   (see https://code.google.com/p/kth-hvac/wiki/DownloadedDataFormat)
%                                   (its size is equal to the number of different signals)
%
%    - aiSignalsRoomsIDs            ID of the room in which the signal was taken
%
%    - astrSignalsRoomsDescriptions string describing in which room the signal
%                                   was taken
%
%    - aafSignalsPositions          matrix containing the position of the
%                                   various signals inside the building. Each
%                                   column is a triplete X Y Z, with each
%                                   coordinate being inside the [0 1] interval.
%                                   They represent linearly scaled versions of
%                                   the geographic position of the devices
%
%
% Howto plot a signal:
%
% - in the command window, call
%   "Signal.GetSignalsIDs"
%   and see the list of the signals IDs
%
% - in the command window, call
%   "Converter.PlotSignals( tDataset, aiListOfDesiredSignalsIDs )"
%
function tDataset = ConvertTxtFromWebsite(									...
								astrDatabaseFilenames,						...
								fSamplingPeriodInSeconds,					...
								strConvertedDatabaseFilename,				...
								aaiListOfSignalsAndDevicesToBeDiscarded,	...
							   	bConvertInInteractiveMode					)
	%
	%
	switch( nargin )
		%
		case 2
			tDataset = Converter.Convert(	astrDatabaseFilenames,		...
											fSamplingPeriodInSeconds	);
		%
		case 3
			tDataset = Converter.Convert(	astrDatabaseFilenames,			...
											fSamplingPeriodInSeconds,		...
											strConvertedDatabaseFilename	);
		%
		case 4
			tDataset = Converter.Convert(	astrDatabaseFilenames,						...
											fSamplingPeriodInSeconds,					...
											strConvertedDatabaseFilename,				...
											aaiListOfSignalsAndDevicesToBeDiscarded		);
		%
		case 5
			tDataset = Converter.Convert(	astrDatabaseFilenames,						...
											fSamplingPeriodInSeconds,					...
											strConvertedDatabaseFilename,				...
											aaiListOfSignalsAndDevicesToBeDiscarded,	...
											bConvertInInteractiveMode					);
		%
		otherwise
			error('wrong number of parameters');
		%
	end;%
	%
end % function



% Copyright (c) <2013>, <School of Electrical Engineering, KTH Royal Institute of Technology>
% All rights reserved.
% 
% Redistribution and use in source and binary forms, with or without
% modification, are permitted provided that the following conditions are met: 
% 
% 1. Redistributions of source code must retain the above copyright notice, this
%    list of conditions and the following disclaimer. 
% 2. Redistributions in binary form must reproduce the above copyright notice,
%    this list of conditions and the following disclaimer in the documentation
%    and/or other materials provided with the distribution. 
% 
% THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
% ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
% WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
% DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
% ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
% (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
% LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
% ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
% (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
% SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
% 
% The views and conclusions contained in the software and documentation are those
% of the authors and should not be interpreted as representing official policies, 
% either expressed or implied, of the FreeBSD Project.
%
% Authors:	Varagnolo Damiano, Ebadat Afrooz and Pattarello Giorgio
% Version:	1.1
% Date:		2013.06.14

