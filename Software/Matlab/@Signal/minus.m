% NOTE: we need to duplicate the code to bypass ResampleAt, that would cause problems
% because of interpolating the invalid data
%
% Example: calling ResampleAt on a negative CO2 levels signals would lead the signal
% to be altered, and thus to meaningless results
%
function tSum = plus( tSignalA, tSignalB )
	%
	% resample the signals on the same times
	afUnionOfTimes = sort( unique( [ tSignalA.afTimes ; tSignalB.afTimes ] ) );
	%
	tResampledA = tSignalA.ResampleAt( afUnionOfTimes );
	tResampledB = tSignalB.ResampleAt( afUnionOfTimes );
	%
	% we copy the information of the first signal
	tSum = tSignalA.Copy();
	%
	tSum.afTimes 		= afUnionOfTimes;
	tSum.afValues 		= tResampledA.afValues - tResampledB.afValues;
	tSum.afInaccuracies	= max( tResampledA.afInaccuracies, tResampledB.afInaccuracies );
	%
end %


