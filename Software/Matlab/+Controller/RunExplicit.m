%locked out from the system
if( any( strcmp( who, 'tTCPConnection' ) ) )
	%
	fclose( tTCPConnection.tTcpIpClient );
	%
end;%

close all;
clear all;
clear classes;
clc;
 
%Todo
%		- Change the thermal bounds based on the occupancy;

% to get the updated models
addpath(genpath('Models/'));

% % to get CPLEX path
% addpath(genpath('/Users/giorgiopattarello/Applications/IBM/ILOG/CPLEX_Studio1251/cplex/'))
addpath(genpath('C:/Program Files/IBM/ILOG/CPLEX_Studio125/cplex'));

% import the necessary classes
import Controller.*;
import MatlabToTikZ.*;
import InternetConnection.*;
import Scenarios.*;

%% Connection
%
tTCPConnectionParameters			= InternetConnection.LoadDefaultTCPConnectionParameters();
tTCPConnection						= InternetConnection.KTHConnection( tTCPConnectionParameters );
%
%
% Explicit MPC Controller

% co2 controller
tTemperatureControllerParameters				= Controller.LoadExplicitTemperatureMPCParameters();
tTemperatureController							= Controller.ExplicitWSTemperatureMPC( tTemperatureControllerParameters );
%
tTemperatureController.AcquireMeasurements( tTCPConnection );
tTemperatureController.AcquireForecasts( tTCPConnection );
tTemperatureController.ComputeControlInputs();

