% function SetInitialConditions( tController )
% 
function SetInitialConditions( tController )
	% get the initial condition for the optimization problem from the server. 
	% In thiss simple version these are set to see if the optimization
	% problem is solved correctly.
	%
	try %
		%
		tDevicesIDs							= Signal.GetDevicesIDs();
		tSignalsIDs							= Signal.GetSignalsIDs();
		fCurrentJulianDate					= Time.GetCurrentJulianDate();
		%
		%------------------------------------------------------------------
		%retriving the needed indexes
		iTemperatureOfTheRoomIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfEnvironment,	...
							tDevicesIDs.iMote1035				);
		%
		% wall 1
		iTemperatureWall_1_OutIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfWall,			...
							tDevicesIDs.iMote1006				);
						
		iTemperatureWall_1_InIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfWall,			...
							tDevicesIDs.iMote1007				);
		%
		% wall 2
		iTemperatureWall_2_OutIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfEnvironment,	...
							tDevicesIDs.iMote1213				);
						
		iTemperatureWall_2_InIndex	=								...
				Signal.FindSignalIndex(								...		
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfWall,			...
							tDevicesIDs.iMote1005				);
		%
		% wall 3
		iTemperatureWall_3_OutIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfEnvironment,	...
							tDevicesIDs.iMote1003				);
						
		iTemperatureWall_3_InIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfWall,			...
							tDevicesIDs.iMote1011				);
		%
		% wall 4
		iTemperatureWall_4_OutIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfWall,			...
							tDevicesIDs.iMote1110				);
						
		iTemperatureWall_4_InIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfWall,			...
							tDevicesIDs.iMote1036				);
		%
		% floor
		iTemperatureFloor_OutIndex	=								...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfCeiling,		...
							tDevicesIDs.iMote1033				);
						
		iTemperatureFloor_InIndex	=								...
				Signal.FindSignalIndex(								...							
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfCeiling,		...
							tDevicesIDs.iMote1033				);
		%
		% ceiling
		iTemperatureCeiling_OutIndex	=							...
				Signal.FindSignalIndex(								...
							tController.atMeasurementsSignals,		...							
							tSignalsIDs.iTemperatureOfCeiling,		...
							tDevicesIDs.iMote1037				);
						
		iTemperatureCeiling_InIndex	=								...
				Signal.FindSignalIndex(								...							
							tController.atMeasurementsSignals,		...
							tSignalsIDs.iTemperatureOfCeiling,		...
							tDevicesIDs.iMote1037				);
		%
		%
		%------------------------------------------------------------------
		% retriving the measurements i need
		% 
		fTemperatureOfTheRoom	= tController.atMeasurementsSignals(iTemperatureOfTheRoomIndex).ExtractSamplesAt(fCurrentJulianDate);
		fTemperatureWall_1_Out	= tController.atMeasurementsSignals(iTemperatureWall_1_OutIndex).ExtractSamplesAt(fCurrentJulianDate);		
		fTemperatureWall_1_In	= tController.atMeasurementsSignals(iTemperatureWall_1_InIndex).ExtractSamplesAt(fCurrentJulianDate);
		fTemperatureWall_2_Out	= tController.atMeasurementsSignals(iTemperatureWall_2_OutIndex).ExtractSamplesAt(fCurrentJulianDate);
		fTemperatureWall_2_In	= tController.atMeasurementsSignals(iTemperatureWall_2_InIndex).ExtractSamplesAt(fCurrentJulianDate);
		fTemperatureWall_3_Out	= tController.atMeasurementsSignals(iTemperatureWall_3_OutIndex).ExtractSamplesAt(fCurrentJulianDate);			
		fTemperatureWall_3_In	= tController.atMeasurementsSignals(iTemperatureWall_3_InIndex).ExtractSamplesAt(fCurrentJulianDate);
		fTemperatureWall_4_Out	= tController.atMeasurementsSignals(iTemperatureWall_4_OutIndex).ExtractSamplesAt(fCurrentJulianDate);			
		fTemperatureWall_4_In	= tController.atMeasurementsSignals(iTemperatureWall_4_InIndex).ExtractSamplesAt(fCurrentJulianDate);
		fTemperatureFloor_Out	= tController.atMeasurementsSignals(iTemperatureFloor_OutIndex).ExtractSamplesAt(fCurrentJulianDate);	
		fTemperatureFloor_In	= tController.atMeasurementsSignals(iTemperatureFloor_InIndex).ExtractSamplesAt(fCurrentJulianDate);
		fTemperatureCeiling_Out = tController.atMeasurementsSignals(iTemperatureCeiling_OutIndex).ExtractSamplesAt(fCurrentJulianDate);
		fTemperatureCeiling_In	= tController.atMeasurementsSignals(iTemperatureCeiling_InIndex).ExtractSamplesAt(fCurrentJulianDate);
		%
		afInitialConditions	= [		fTemperatureOfTheRoom	;
									fTemperatureWall_1_Out	;
									fTemperatureWall_1_In	;
									fTemperatureWall_2_Out	;
									fTemperatureWall_2_In	;
									fTemperatureWall_3_Out	;
									fTemperatureWall_3_In	;
									fTemperatureWall_4_Out	;
									fTemperatureWall_4_In	;
									fTemperatureFloor_Out	;
									fTemperatureFloor_In	;
									fTemperatureCeiling_Out ;
									fTemperatureCeiling_In		];
		%
		tController.tModel.afX0 = afInitialConditions;
		%
	catch exception
		%
		disp(exception.message);
		warning('Problems setting the initial conditions of the optimization problem');
		%
	end;% end catch
	%
end %