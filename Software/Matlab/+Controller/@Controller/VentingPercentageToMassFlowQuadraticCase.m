% function afMassFlows = VentingPercentageToMassFlowQuadraticCase( faVentingPercentages , strKindOfDuct )
%
function afMassFlows = VentingPercentageToMassFlowQuadraticCase( afVentingPercentages, strKindOfDuct )
	%
	try %
		%
% 		if afVentingPercentages > 100
% 			%
% 			warning('Warning: The percentage must be between 0 and 100. You asked for %d, we put 100.', afVentingPercentages);
% 			afVentingPercentages = 100;
% 			%
% 		elseif afVentingPercentages < 0
% 			%
% 			warning('Warning: The percentage must be between 0 and 100. You asked for %d, we put 0.', afVentingPercentages);
% 			afVentingPercentages = 0;
% 			%
% 		end;% end check on the percentage
		%
		afVentingPercentages = max(afVentingPercentages, 0);
		afVentingPercentages = min(afVentingPercentages, 100);
		%
		switch strKindOfDuct 
			%
			case 'V'			% Venting Duct
				p1 =   -1.885e-05; 
				p2 =     0.004564;
				p3 =            0;
			%
			case 'C'			% Cooling Duct
				p1 =   -9.789e-06;
				p2 =     0.002118;
				p3 =            0;
			%
			case 'T'			% Total 
				p1 = -2.8639e-05;
				p2 =    0.006682;
				p3 =           0;
			%
			otherwise
				error('wrong kind of duct!!');
			%
		end;%
		%
		afMassFlows =  p1 .* afVentingPercentages.^2 + p2 .* afVentingPercentages + p3;
		%
	catch exception
		%
		disp(exception.message);
		warning('Problems calculating the mass flow from the given percentage');
		%
	end;% end catch
	%
end % end function

