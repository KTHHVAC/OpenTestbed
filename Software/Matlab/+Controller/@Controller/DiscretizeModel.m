% function [	aafADiscretized,		...
% 			aafBDiscretized,		...
% 			aafEDiscretized,		...
% 			aafCDiscretized ]		...
% 				= DiscretizeModel(	...
% 					tController,	...
% 					aafA ,			...
% 					aafB,			...
% 					aafE,			...
% 					aafC			)
% 
%
function [	aafADiscretized,		...
			aafBDiscretized,		...
			aafEDiscretized,		...
			aafCDiscretized ]		...
				= DiscretizeModel(	...
					tController,	...
					aafA ,			...
					aafB,			...
					aafE,			...
					aafC			)
	% Prepare discrete system matrices. Forward Eulero
	%
	try %
		%
		BB = [ aafB aafE ];
		
		dT = tController.fSamplingTimeInSeconds; % check the Configuration file: 3600 * obj.fSamplingTimeInSeconds
												% only if the sampling time is given as fractions of hour! So, it
												% should not be in seconds; in this case, drop 3600
        %
		% zoh
		sys  = ss( aafA, BB, aafC, 0 );
        sysd = c2d( sys, dT );
        [A, Bd, C, D] = ssdata( sysd );
		%
		%
		%
		iNumberOfInputs = size(aafB,2);
		%
		E = Bd( :, iNumberOfInputs + 1 : end );
		B = Bd( :, 1 : iNumberOfInputs );
		%
		aafADiscretized = A;
		aafBDiscretized = B;
		aafEDiscretized = E;
		aafCDiscretized = C;
		%
	catch exception
		%
		disp(exception.message);
		warning('Problems in the model discretization.');
		%
	end;%
	%
end %

%===============================================================================


