function ExtractScenarios( tController )
	%
	try %
		%
		%
		if( tController.bPrintDebugInformation )
			%
			fprintf('Entering Controller.ExtractScenarios()\n');
			%
		end;%
		%
		fCurrentJulianDate = Time.GetCurrentJulianDate();
		%
		%
		%------------------------------------------------------------------
		% Occupancy
		if( ~isempty(tController.tOccupancyScenariosGenerator)  )
			%
			iCurrentOccupancy =	...
				tController.atMeasurementsSignals(tController.tMeasurementsSignalsIndexes.iOccupancy).ExtractSamplesAt(fCurrentJulianDate);
			%
			tController.aafOccupancyScenarios	=									...
				tController.tOccupancyScenariosGenerator.ExtractScenarios(			...
					fCurrentJulianDate,												...
					tController.iNumberOfScenarios,									...
					iCurrentOccupancy												);
			%
		end;%
		%
		%
		%------------------------------------------------------------------
		% External Temperature
		if( ~isempty(tController.tTemperatureScenariosGenerator)  )
			%
			% check if it is possible to get some forecast error
% 			warning('TODO');
			fOneHourAheadTemperatureForecastError =																				...
				Signal.GetPredictionErrorAt(																					...
					tController.atForecastsSignals(tController.tForecastsSignalsIndexes.iForecastedExternalTemperatureCurrent),	...
					tController.atForecastsSignals(tController.tForecastsSignalsIndexes.iForecastedExternalTemperature),		...
					fCurrentJulianDate,																							...
					Time.GetJulianHour()																						);
			%
			fTolerance	= 0.5;
			%
			tController.aafTemperatureScenarios =									...
				tController.tTemperatureScenariosGenerator.ExtractScenarios(		...
											fCurrentJulianDate,						...
											tController.iNumberOfScenarios,			...
											fOneHourAheadTemperatureForecastError,	...
											fTolerance								);
			%
		end;%
		%
		%
		%------------------------------------------------------------------
		% Radiation
		if( ~isempty(tController.tRadiationScenariosGenerator)  )
			%
			tController.aafRadiationScenarios	=									...
				tController.tRadiationScenariosGenerator.ExtractScenarios(			...
											fCurrentJulianDate,						...
											tController.iNumberOfScenarios);
			%
		end;%
		%
        %
		%------------------------------------------------------------------
		if( tController.bPrintDebugInformation )
			%
			if(		sum(sum( isnan(tController.aafTemperatureScenarios) ) )		...
				+	sum(sum( isnan(tController.aafOccupancyScenarios)   ) )		...
				+	sum(sum( isnan(tController.aafRadiationScenarios)   ) ) > 0	);
				%
				warning( 'some of the scenarios contain some NaNs' );
				%
			end;%
			%
			fprintf('Exiting Controller.ExtractScenarios()\n');
			%
		end;%
		%
		%
	catch exception
		%
		disp(exception.message);
		warning('Unable to get and extract the scenarios');
		%
	end % try
	%	
end % function

