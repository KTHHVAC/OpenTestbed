function SetDisturbances( tController )
	% get the initial condition for the optimization problem from the server. 
	% In thiss simple version these are set to see if the optimization
	% problem is solved correctly.
	%
	try %
		%
		%------------------------------------------------------------------
		% preliminary operations
		tDevicesIDs							= Signal.GetDevicesIDs();
		tSignalsIDs							= Signal.GetSignalsIDs();
		fCurrentJulianDate					= Time.GetCurrentJulianDate();
		%
		%------------------------------------------------------------------
		% retriving the needed indexes 
		iForecastedOccupancyIndex	=										...
				Signal.FindSignalIndex(										...
							tController.atForecastsSignals,					...
							tSignalsIDs.iForecastedOccupancy8h,				...
							tDevicesIDs.iA225LocalLookUpTableForecast	);
		%
		iCurrentOccupancyIndex		=										...
				Signal.FindSignalIndex(										...
							tController.atMeasurementsSignals,				...
							tSignalsIDs.iOccupancy,							...
							tDevicesIDs.iManualPeopleCounter				);
		%
		iForecastedSolarRadiationIndex	=												...
				Signal.FindSignalIndex(													...
							tController.atForecastsSignals,								...
							tSignalsIDs.iForecastedExternalLightingTop8h,	...
							tDevicesIDs.iEXTERNALLocalLookUpTableWeatherForecast		);
		%
		%
		iCurrentSolarRadiationIndex		=									...
				Signal.FindSignalIndex(										...
							tController.atMeasurementsSignals,				...
							tSignalsIDs.iExternalLightingTop,				...
							tDevicesIDs.iEXTERNALLocalLookUpTableWeatherForecast	);
		%				
		iForecastedOutsideTemperatureIndex	=								...
				Signal.FindSignalIndex(										...
							tController.atForecastsSignals,					...
							tSignalsIDs.iForecastedExternalTemperature8h,	...
							tDevicesIDs.iWundergroundWeatherForecast	); 
		%
		%				
		iCurrentOutsideTemperatureIndex	=									...
				Signal.FindSignalIndex(										...
							tController.atMeasurementsSignals,				...
							tSignalsIDs.iTemperatureOfOutsideEnvironment,	...
							tDevicesIDs.iPLC	);	
		%
		%
		iCurrentForecastedOutsideTemperatureIndex	=								...
				Signal.FindSignalIndex(												...
							tController.atForecastsSignals,							...
							tSignalsIDs.iForecastedTemperatureOfEnvironmentCurrent,	...
							tDevicesIDs.iWundergroundWeatherForecast	);
		%
		%
		%
		%
		%				
		iForecastedRoom2TemperatureIndex	=								...
				Signal.FindSignalIndex(										...
							tController.atForecastsSignals,					...
							tSignalsIDs.iForecastedTemperatureOfEnvironment8h,	...
							tDevicesIDs.iA231LocalLookUpTableForecast		); 
		
		iForecastedCorridorTemperatureIndex	=								...
				Signal.FindSignalIndex(										...
							tController.atForecastsSignals,					...
							tSignalsIDs.iForecastedTemperatureOfEnvironment8h,	...
							tDevicesIDs.iA208LocalLookUpTableForecast		); 
						
		iForecastedRoom3TemperatureIndex	=								...
				Signal.FindSignalIndex(										...
							tController.atForecastsSignals,					...
							tSignalsIDs.iForecastedTemperatureOfEnvironment8h,	...
							tDevicesIDs.iA221LocalLookUpTableForecast	); 
						
		iForecastedCeilingTemperatureIndex	=								...
				Signal.FindSignalIndex(										...
							tController.atForecastsSignals,					...
							tSignalsIDs.iForecastedTemperatureOfEnvironment8h,	...
							tDevicesIDs.iA225LocalLookUpTableForecast		); 
		
						
		iCurrentRoom2TemperatureIndex	=									...
				Signal.FindSignalIndex(										...
							tController.atMeasurementsSignals,				...
							tSignalsIDs.iTemperatureOfEnvironment,			...
							tDevicesIDs.iMote1213							); 
		
		iCurrentCorridorTemperatureIndex	=								...
				Signal.FindSignalIndex(										...
							tController.atMeasurementsSignals,				...
							tSignalsIDs.iTemperatureOfEnvironment,			...
							tDevicesIDs.iMote1003							); 
						
		iCurrentRoom3TemperatureIndex	=									...
				Signal.FindSignalIndex(										...
							tController.atMeasurementsSignals,				...
							tSignalsIDs.iTemperatureOfWall,					...
							tDevicesIDs.iMote1110							); 
						
		iCurrentCeilingTemperatureIndex	=									...
				Signal.FindSignalIndex(										...
							tController.atMeasurementsSignals,				...
							tSignalsIDs.iTemperatureOfCeiling,				...
							tDevicesIDs.iMote1037							); 
		
		%
		%
		%------------------------------------------------------------------
		% setting the disturbances vector
		%
		% interested samples times for the forecasts
		fSamplingTimeInJulianDates =	Time.GetJulianSecond() * tController.fSamplingTimeInSeconds;
		%
		afTimesNeededForTheDisturbancesForecasts =																...
				[		fCurrentJulianDate + fSamplingTimeInJulianDates											...
					:	fSamplingTimeInJulianDates																...
					:	fCurrentJulianDate + fSamplingTimeInJulianDates * ( tController.iPredictionHorizon - 1)	]';
		%
		%
		% room 2
		afForecastedTemperatureRoom2			...
			= tController.atForecastsSignals(iForecastedRoom2TemperatureIndex).ExtractSamplesAt(afTimesNeededForTheDisturbancesForecasts);
		fCurrentTemperatureRoom2				...
			= tController.atMeasurementsSignals(iCurrentRoom2TemperatureIndex).ExtractSamplesAt(fCurrentJulianDate); 
		%
		% corridor
		afForecastedTemperatureCorridor			...
			= tController.atForecastsSignals(iForecastedCorridorTemperatureIndex).ExtractSamplesAt(afTimesNeededForTheDisturbancesForecasts);
		fCurrentTemperatureCorridor				...
			= tController.atMeasurementsSignals(iCurrentCorridorTemperatureIndex).ExtractSamplesAt(fCurrentJulianDate);
		%
		% room 3
		afForecastedTemperatureRoom3			...
			= tController.atForecastsSignals(iForecastedRoom3TemperatureIndex).ExtractSamplesAt(afTimesNeededForTheDisturbancesForecasts);
		fCurrentTemperatureRoom3				...
			= tController.atMeasurementsSignals(iCurrentRoom3TemperatureIndex).ExtractSamplesAt(fCurrentJulianDate); 
		%
		% Ceiling
		afForecastedTemperatureCeiling			...
			= tController.atForecastsSignals(iForecastedCeilingTemperatureIndex).ExtractSamplesAt(afTimesNeededForTheDisturbancesForecasts);
		fCurrentTemperatureCeiling				...
			= tController.atMeasurementsSignals(iCurrentCeilingTemperatureIndex).ExtractSamplesAt(fCurrentJulianDate); 
		%
		%
		%------------------------------------------------------------------
		% Occupancy
		%
		fOccupancyCopulasSamplingTimeInJulianDate =										...
						tController.tOccupancyScenariosGenerator.fSamplingTimeInSeconds	...
					*	Time.GetJulianSecond();
		%
		afOccupancyCopulasTimes		=	[			fCurrentJulianDate																...
											:		fOccupancyCopulasSamplingTimeInJulianDate										...
											:		fCurrentJulianDate																...
												+	fOccupancyCopulasSamplingTimeInJulianDate										...
												*	( tController.tOccupancyScenariosGenerator.iForecastingHorizonInSamples	- 1)	];
		%
		aafAllOccupancyScenarios = zeros( tController.iPredictionHorizon, tController.iNumberOfScenarios );
		%
		afForecastedOccupancy					...
			= tController.atForecastsSignals(iForecastedOccupancyIndex).ExtractSamplesAt( afOccupancyCopulasTimes, true);
		%
		iCurrentOccupancy						...
			= tController.atMeasurementsSignals(iCurrentOccupancyIndex).ExtractSamplesAt( fCurrentJulianDate );
		%
		for iScenario = 1 : numel( tController.aafOccupancyScenarios(: , 1) )
			%
% 			aiSingleOccupancyScenario	= afForecastedOccupancy + tController.aafOccupancyScenarios(iScenario , :);
			aiSingleOccupancyScenario	= tController.aafOccupancyScenarios( iScenario , : );
			%
			tController.atForecastsSignals(iForecastedOccupancyIndex).RemoveSamplesFrom( fCurrentJulianDate );
			tController.atForecastsSignals(iForecastedOccupancyIndex).Insert(	aiSingleOccupancyScenario ,			...
																				afOccupancyCopulasTimes,			...
																				true								);
			afSampledOccupancyForecasts																				...
				= tController.atForecastsSignals(iForecastedOccupancyIndex).ExtractSamplesAt(						...
								afTimesNeededForTheDisturbancesForecasts, true);
			aafAllOccupancyScenarios( : , iScenario ) = [ iCurrentOccupancy ; afSampledOccupancyForecasts ];
			%
		end;%
		%
		%
		%------------------------------------------------------------------
		% Radiation
		%
		fRadiationCopulasSamplingTimeInJulianDate =										...
						tController.tRadiationScenariosGenerator.fSamplingTimeInSeconds	...
					*	Time.GetJulianSecond();
		%
		afRadiationCopulasTimes		=	[			fCurrentJulianDate																...
											:		fRadiationCopulasSamplingTimeInJulianDate										...
											:		fCurrentJulianDate																...
												+	fRadiationCopulasSamplingTimeInJulianDate										...
												*	( tController.tRadiationScenariosGenerator.iForecastingHorizonInSamples	- 1)	];
		%
		aafAllRadiationScenarios = zeros( tController.iPredictionHorizon, tController.iNumberOfScenarios );
		%
		%
		afForecastedRadiation				...
			= tController.atForecastsSignals(iForecastedSolarRadiationIndex).ExtractSamplesAt( afRadiationCopulasTimes );
		%
		iCurrentRadiation					...
			= tController.atMeasurementsSignals(iCurrentSolarRadiationIndex).ExtractSamplesAt(fCurrentJulianDate);
		%
		for iScenario = 1 : numel( tController.aafRadiationScenarios(: , 1) )
			%
% 			aiSingleOccupancyScenario	= afForecastedRadiation + tController.aafRadiationScenarios(iScenario , :);
			afSingleRadiationScenario	= tController.aafRadiationScenarios( iScenario , :);
			tController.atForecastsSignals(iForecastedSolarRadiationIndex).RemoveSamplesFrom( fCurrentJulianDate );
			tController.atForecastsSignals(iForecastedSolarRadiationIndex).Insert(	afSingleRadiationScenario ,			...
																					afRadiationCopulasTimes,			...
																					true								);
			afSampledRadiationForecasts																					...
				= tController.atForecastsSignals(iForecastedSolarRadiationIndex).ExtractSamplesAt(						...
								afTimesNeededForTheDisturbancesForecasts );
			aafAllRadiationScenarios( : , iScenario ) = [ iCurrentRadiation ; afSampledRadiationForecasts ];
			%
		end;%
		%
		%
		%------------------------------------------------------------------
		% Temperature
		%
		fTemperatureCopulasSamplingTimeInJulianDate =										...
						tController.tTemperatureScenariosGenerator.fSamplingTimeInSeconds	...
					*	Time.GetJulianSecond();
		%
		afTemperatureCopulasTimes	=	[			fCurrentJulianDate + fTemperatureCopulasSamplingTimeInJulianDate			...
											:		fTemperatureCopulasSamplingTimeInJulianDate									...
											:		fCurrentJulianDate															...
												+	fTemperatureCopulasSamplingTimeInJulianDate									...
												*	tController.tTemperatureScenariosGenerator.iForecastingHorizonInSamples		];
		%
		aafAllTemperatureScenarios = zeros( tController.iPredictionHorizon, tController.iNumberOfScenarios );
		%
		afForecastedTemperature				...
			= tController.atForecastsSignals(iForecastedOutsideTemperatureIndex).ExtractSamplesAt( afTemperatureCopulasTimes );
		%
		iCurrentOutsideTemperature				...
			= tController.atMeasurementsSignals(iCurrentOutsideTemperatureIndex).ExtractSamplesAt(fCurrentJulianDate);
		%
		fCurrentForecastedOutsideTemperature	...
			= tController.atForecastsSignals(iCurrentForecastedOutsideTemperatureIndex).ExtractSamplesAt(fCurrentJulianDate);
		%
		%
		for iScenario = 1 : numel( tController.aafTemperatureScenarios(: , 1) )
			%
			aiSingleTemperatureScenario	= afForecastedTemperature - tController.aafTemperatureScenarios(iScenario , :)';
% 			aiSingleTemperatureScenario	= tController.aafTemperatureScenarios(iScenario , :)';
			tController.atForecastsSignals(iForecastedOutsideTemperatureIndex).RemoveSamplesFrom( fCurrentJulianDate );
			tController.atForecastsSignals(iForecastedOutsideTemperatureIndex).Insert( aiSingleTemperatureScenario ,		...
																						afTemperatureCopulasTimes,			...
																						true								);
			afSampledTemperatureForecasts																					...
				= tController.atForecastsSignals(iForecastedOutsideTemperatureIndex).ExtractSamplesAt(							...
										afTimesNeededForTheDisturbancesForecasts );
% 			aafAllTemperatureScenarios( : , iScenario ) = [ iCurrentOutsideTemperature ; afSampledTemperatureForecasts ];
			aafAllTemperatureScenarios( : , iScenario ) = [ fCurrentForecastedOutsideTemperature ; afSampledTemperatureForecasts ];
			%
		end;%
		%
		%
		%------------------------------------------------------------------		
		%		
		% arrange the vector in the requested way
		%		
		afRoom2					= [ fCurrentTemperatureRoom2 ;		...
									afForecastedTemperatureRoom2	];
		
		afCorridor				= [ fCurrentTemperatureCorridor ;	...
									afForecastedTemperatureCorridor	];
								
		afRoom3					= [ fCurrentTemperatureRoom3 ;		...
									afForecastedTemperatureRoom3	];
								
		afCeiling				= [ fCurrentTemperatureCeiling ;	...
									afForecastedTemperatureCeiling	];
		%
		aafDisturbancesScenarioMatrix	= zeros(	7 * tController.iPredictionHorizon,	... 
													tController.iNumberOfScenarios		); %todo: put 7 only to debug
		%
		for iScenario = 1 : tController.iNumberOfScenarios
			%
			aiOccupancy				= aafAllOccupancyScenarios( : , iScenario );
			afSolarRadiation		= aafAllRadiationScenarios( : , iScenario );
			afOutsideTemperature	= aafAllTemperatureScenarios( : , iScenario );
			%
			aafDisturbances			= [ afOutsideTemperature' ;			...
										afRoom2' ;						...
										afCorridor' ;					...
										afRoom3' ;						...
										afCeiling'	;					...
										afSolarRadiation' ;				...
										aiOccupancy'					];
			%
			aafDisturbancesScenarioMatrix(:,iScenario) = aafDisturbances(:);
			%
		end;%
		%
		%
		%
		% Getting two vectors for matrices constraints building
        % Worst case approach
        aafEvaluationDisturbancesMatrix =											...
											tController.tModel.aafCC		*		...									
											tController.tModel.aafAE		*		...
											aafDisturbancesScenarioMatrix	;	
								
        afMinimumDisturbancesVector = min(aafEvaluationDisturbancesMatrix')';
        afMaximumDisturbancesVector = max(aafEvaluationDisturbancesMatrix')';
        %------------------------------------------------------------------
        %------------------------------------------------------------------
        aafMinAndMaxMatrix = [-	afMinimumDisturbancesVector';	...
                                afMaximumDisturbancesVector'];
        % Disturbances contribution for Outputs Constraints
        tController.tModel.afOutputDisturbancesStocastic = aafMinAndMaxMatrix(:);
        %
        %------------------------------------------------------------------
        %------------------------------------------------------------------
        aafMinAndMaxMatrix = [	afMinimumDisturbancesVector';	...
                              - afMaximumDisturbancesVector'];                   
        % Disturbances contribution for Mixed Constraints
        tController.tModel.afMixedDisturbancesStocastic = aafMinAndMaxMatrix(:);
	catch exception
		%
		disp(exception.message);
		warning('Problems setting the disturbances vector for the optimization problem');
		%
	end;% end catch
	%
end %