
%% function [aafLeftSide, afRightSide ] = GetInequalityLeftAndRightSidesSoftAndMixedConstraints( tController )
% Considering an optimization problem subjected to constraints as Az<b, 
% this function compute and return the right and left matrices of the
% previous relation.
% Outputs :
%			afRightSide = b;
%			aafLeftSide = A;
% Inputs  :	
%			tController	 =  Controller structure;
% 

function [ aafLeftSide, afRightSide ] = GetInequalityLeftAndRightSides( tController )
	%
	try %
		%
		iNumberOfInputs				= size( tController.tModel.aafB, 2 );
		iNumberOfOutputs			= size( tController.tModel.aafC, 1 );
		iNumberOfLinearConstraints	= size( tController.tModel.aafGGu, 1);
%--------------------------------------------------------------------------
	aafLeftSideFirstBlockColumn =	[		tController.tModel.aafGGy								... 
											*	tController.tModel.aafCC							...
											*	tController.tModel.aafAB		;					...
											%
												tController.tModel.aafGGuMixed						...
											-	(													...
														tController.tModel.aafGGxMixed				...
													*	tController.tModel.aafAB					...
												)									;
											%
											zeros(	2*												...
														iNumberOfOutputs							...
													*	tController.iPredictionHorizon,				... 
														tController.iPredictionHorizon				...
													*	iNumberOfInputs								...
												 )						;
											%
											tController.tModel.aafGGu								...
										];
		%------------------------------------------------------------------							
		aafLeftSideSecondBlockColumn =	[	-tController.tModel.aafGGe			;					...
											%
											zeros(      2*tController.iPredictionHorizon,             ... 
                                                        tController.iPredictionHorizon)	;			...											
											%
											-eye(													...
														tController.iPredictionHorizon				...
													*	iNumberOfOutputs							...
												);												...
											%	
											zeros(													...
														iNumberOfLinearConstraints+ tController.iPredictionHorizon,					...
														iNumberOfOutputs							...
													*	tController.iPredictionHorizon				...
												 )													...
										];
        %------------------------------------------------------------------											    
         aafLeftSideThirdBlockColumn = [	zeros(2*tController.iPredictionHorizon,tController.iPredictionHorizon)			;					...
											%
											-tController.tModel.aafGGeMixed		;					...
											%
											zeros(tController.iPredictionHorizon);
                                            %
                                            -eye(													...
														tController.iPredictionHorizon				...
													*	iNumberOfOutputs							...
												);													...
											%	
											zeros(		iNumberOfLinearConstraints,					...
														iNumberOfOutputs					...
													*	tController.iPredictionHorizon		...
												 )											...
										];
		%------------------------------------------------------------------											 
		afRightSide =	[	tController.tModel.afBBy							...
								-												...
							tController.tModel.afOutputDisturbancesStocastic	...
								-												...
									(											...
										tController.tModel.aafGGy				...
									*	tController.tModel.aafCC				...
									*	tController.tModel.aafAA				...
									*	tController.tModel.afX0					...
									)								;
							%		
							(													...
								(												...
									tController.tModel.aafGGxMixed				...
								*	tController.tModel.aafAA					...
								)												...
								+												...
									tController.tModel.aafBBx0Mixed				...
							)													...
							*													...
								tController.tModel.afX0							...
							+													...
							tController.tModel.afMixedDisturbancesStocastic		...
							+													...
									tController.tModel.afBBMixed				...
							;
							%
							zeros(	2*											...
										tController.iPredictionHorizon			...
									*	iNumberOfOutputs,						...
									1											...
								 );												...
							%
							tController.tModel.afBBu		
						];
%--------------------------------------------------------------------------
		
		aafLeftSide		= [aafLeftSideFirstBlockColumn, aafLeftSideSecondBlockColumn, aafLeftSideThirdBlockColumn];
	catch exception
		%
		disp(exception.message);
		warning('Problem generating the left and the right side of the inequality constraints matrices for The Soft and Mixed Constraints case.');
		%
	end;% end catch
% 	%
end %
