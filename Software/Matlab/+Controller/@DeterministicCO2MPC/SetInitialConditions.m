% function SetInitialConditions( tController )
% 
function SetInitialConditions( tController )
	% get the initial condition for the optimization problem from the server. 
	% In thiss simple version these are set to see if the optimization
	% problem is solved correctly.
	%
	try %
		%
		fCurrentJulianDate					= Time.GetCurrentJulianDate();
		LOWEST_CO2_CONCENTRATION_POSSIBLE	= tController.fLowestCO2ConcentrationPossible;
		%
		%retriving the needed indexes
		iCO2OfTheRoomIndex	=	tController.tMeasurementsSignalsIndexes.iCO2OfEnvironment;
		%
		fCO2OfTheRoom		= tController.atMeasurementsSignals(iCO2OfTheRoomIndex).ExtractSamplesAt(fCurrentJulianDate);
		%
		fInitialConditions	= fCO2OfTheRoom - LOWEST_CO2_CONCENTRATION_POSSIBLE;
		%
		if ( fInitialConditions < 0 )
			%
			fInitialConditions = 1; % to be sure we can compute the further division in the post-processing of CO2
			warning('The CO2 initial condition was lower than 0. It has be put equal to 1.');
			%
		end;%
		%
		%
		tController.tModel.afX0 = fInitialConditions;
		%
	catch exception
		%
		disp(exception.message);
		warning('Problems setting the initial conditions of the optimization problem');
		%
	end;% end catch
	%
end %