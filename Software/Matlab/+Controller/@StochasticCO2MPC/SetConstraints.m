
function SetConstraints( tController )
	% Setting the constraints for the optimization problem
	%
	try %
		%
		% Getting necessary data
		fCurrentJulianDate			=	Time.GetCurrentJulianDate();
		fSamplingTimeInJulianDates	=	Time.GetJulianSecond() * tController.fSamplingTimeInSeconds;
		iNumberOfInputs				=	size( tController.tModel.aafB, 2 );
		% -----------------------------------------------------------------
		% -----------------------------------------------------------------
		% Output bounds	
		%
		tController.tOutputsBounds.afOutputsLowerBounds		= 0;
		%	
		tController.tOutputsBounds.afOutputsUpperBounds		=					...
					tController.tOutputsBounds.CO2.fUpperBound					...
				-	tController.fLowestCO2ConcentrationPossible;
		%
		% Input bounds
		%
		tController.tInputsBounds.afInputsLowerBounds		= 0;
		%
		tController.tInputsBounds.afInputsUpperBounds		=					...
					1200 * tController.tInputsBounds.AirMassFlow.fUpperBound;	
		% -----------------------------------------------------------------
		% -----------------------------------------------------------------
		% Setting matrices
		%
		afBy	= vertcat( -	tController.tOutputsBounds.afOutputsLowerBounds,		...
								tController.tOutputsBounds.afOutputsUpperBounds			...
						 );
		afBu	= vertcat( -	tController.tInputsBounds.afInputsLowerBounds ,			...
								tController.tInputsBounds.afInputsUpperBounds			...
						 );
		tController.tModel.aaafBy		= repmat( afBy, [1, 1, tController.iPredictionHorizon]);
		tController.tModel.aaafBu		= repmat( afBu, [1, 1, tController.iPredictionHorizon]);
		%
		tController.tModel.aaafGu		= repmat([ -1 ; 1 ], [1, 1, tController.iPredictionHorizon]);
		tController.tModel.aaafGy		= repmat([ -1 ; 1 ], [1, 1, tController.iPredictionHorizon]);
		%
		tController.tModel.aaafGe		= repmat([  1 ; 1 ], [1, 1, tController.iPredictionHorizon]);
		tController.tModel.aaafGuMixed	= repmat([ -1 ; 1 ], [1, 1, tController.iPredictionHorizon]);
		tController.tModel.aaafBMixed		= repmat([  0 ; 0 ], [1, 1, tController.iPredictionHorizon]); 
		tController.tModel.afRe			= zeros	( iNumberOfInputs * tController.iPredictionHorizon, 1);	
		%
		%
		% -----------------------------------------------------------------
		% Initializing equality constraints matrix on inputs over prediction horizon
		%
		tController.tModel.aaafLe		= zeros	(	iNumberOfInputs ,						...
													iNumberOfInputs ,						...
													tController.iPredictionHorizon			...
												);
		tController.tModel.aaafGeMixed	= zeros	(	2*	iNumberOfInputs ,					...
														iNumberOfInputs ,					...
														tController.iPredictionHorizon		...
												);
		tController.tModel.aaafGxMixed = zeros	(	2*	iNumberOfInputs ,					...
														iNumberOfInputs ,					...
														tController.iPredictionHorizon		...
												);	
		% Setting equality constraints matrices on inputs over prediction
		% horizon depending on the central fan
		%
		iInitialHour	= 7; %%% TO DO: move it in the parameters
		iFinalHour		= 7;	
		%
		%
		for iStepTime = 1: tController.iPredictionHorizon
			%
			%
			if ( Time.IsBetweenHours( fCurrentJulianDate, iInitialHour, iFinalHour)) 
				%
				tController.tModel.aaafLe(:,:, iStepTime)		=	zeros(iNumberOfInputs);
				%
				tController.tModel.aaafGeMixed(:,:,iStepTime)	=					...
					[	tController.tInputsBounds.AirMassFlow.fLowerBound ;			...
						tController.tInputsBounds.AirMassFlow.fUpperBound	];	
				%
				tController.tModel.aaafGxMixed(:,:, iStepTime)	=					...
					[	-	tController.tInputsBounds.AirMassFlow.fLowerBound;		...
							tController.tInputsBounds.AirMassFlow.fUpperBound ] ;
				%
			else
				%
				tController.tModel.aaafLe(:,:, iStepTime)		=	eye(iNumberOfInputs);
				%
				tController.tModel.aaafGeMixed(:,:,iStepTime)	=					...
					[	0 ;															...
						0	];	% soft constraints on mixed input constraints 
				%
				tController.tModel.aaafGxMixed(:,:, iStepTime)	=					...
					[	0;															...
						0 ] ;
				%
			end;%end if
			%
			%
			fCurrentJulianDate	=	fCurrentJulianDate + fSamplingTimeInJulianDates;
			%
			%
		end;%end for
		%
		%
	catch exception
		%
		disp(exception.message);
		warning('Problems setting the constraints.')
		%
	end;% end catch
	%
end %



