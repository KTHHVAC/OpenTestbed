classdef KTHConnection < InternetConnection.TCPConnection
	%
	properties
		%
		achDigest;
		strUser;
		strPassword;
		%
	end %
	%
	%
	methods
		%
		function tConnection = KTHConnection( tParameters )
			%
			% before continuing we need to set up all the parameters of
			% tConnection that belong to the super class. Thus we need to
			% call the "super" constructor
			tConnection = tConnection@InternetConnection.TCPConnection(		...
								'130.237.50.30', ...	% KTH HVAC IP address
								6342,            ...	% KTH HVAC port
								30000,           ...	% KTH HVAC suitable buffer size 
								10 );					% KTH HVAC expected minimum acket size
			%
			try %
				%
				% check if it was successful
				if( strcmp(tConnection.strError, 'Success') ~= 1 )
					%
					disp(tConnection.strError);
					warning('Error in establishing the TCP connection!')
					return;
					%
				end;%
				%
				% save the settings
				tConnection.strUser		= tParameters.strUser;
				tConnection.strPassword	= tParameters.strPassword;
				%
				% perform the connection
				tConnection.ComputeHash( size(tConnection.strPassword, 2), tConnection.strPassword );
				tConnection.ConnectToHVAC();
				%
			catch exception
				%
				tConnection.strError = exception.message;
				disp(exception.message)
				warning('Unable to allocate the KTH connection object');
				%
			end;% try catch
			%
		end;% default constructor



		% TODO to fix
		aiMsg		= String2Hex(~,achMsg)
		sbin		= Convt2Bin64(~, s)
		add_mod_	= AddMod64(~, s_u_m)
		%
	end	% methods
	%
end % classdef

