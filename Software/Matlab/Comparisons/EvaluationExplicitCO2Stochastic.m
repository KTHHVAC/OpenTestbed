% Explicit Temperature Evaluation Stochastic Simulation

%
x0									=		fCO2InitialCondition  ; 
A = 0.8975;
B = -2.064;
E = 19.1;
 

tExplicitCO2Controller.tSimulation.aafStatesMatrix											...	
	= zeros(	1,																			...
				tExplicitCO2Controller.iPredictionHorizon + 1);
tExplicitCO2Controller.tSimulation.afInputsMatrix											...
	= zeros(	1,																			...
				tExplicitCO2Controller.iPredictionHorizon);
tExplicitCO2Controller.tSimulation.aafStatesMatrix(:,1)										... 
	= fCO2InitialCondition;



[Inputs, iRegion]											=	OriginalPWAfunction(x0);

tExplicitCO2Controller.tSimulation.afInputsMatrix(:,1)		=	Inputs;

for k =  1:tExplicitCO2Controller.iPredictionHorizon
	%
	%
	tExplicitCO2Controller.tSimulation.aafStatesMatrix(:,k+1)		=				...
				A	* tExplicitCO2Controller.tSimulation.aafStatesMatrix(:,k)		...
			+	E	* afOccupancyScenarioMatrix(k)																...
			+	B	* tExplicitCO2Controller.tSimulation.afInputsMatrix(:,k) ;
	%
	fCurrentState = 	tExplicitCO2Controller.tSimulation.aafStatesMatrix(:,k+1);
	%
	[afInputs, iRegion]				=	OriginalPWAfunction(fCurrentState);
	%
	tExplicitCO2Controller.tSimulation.afInputsMatrix(:,k+1)	=	afInputs;
	%
	tExplicitCO2Controller.afRequestedMassFlowOverPredictionHorizon(k) = tExplicitCO2Controller.tSimulation.afInputsMatrix(:,k)/tExplicitCO2Controller.tSimulation.aafStatesMatrix(:,k);
	%
end;%
