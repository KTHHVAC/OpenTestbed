%% Implicit Evaluation

tImplicitCO2Controller.tSimulation.afCurrentState					= fCO2InitialCondition;
tImplicitCO2Controller.aafOccupancyGeneratedScenarios				= aafOccupancyScenarioMatrix;




tImplicitCO2Controller.tSimulation.aafStatesMatrix							...	
			= zeros(	1,																...
						tImplicitCO2Controller.iPredictionHorizon + 1);
tImplicitCO2Controller.tSimulation.afInputsMatrix								...
			= zeros(	1,																...
						tImplicitCO2Controller.iPredictionHorizon);
tImplicitCO2Controller.tSimulation.aafStatesMatrix(:,1)							... 
			= tImplicitCO2Controller.tSimulation.afCurrentState;

cd ..
for iTimeStep = 1:tImplicitCO2Controller.iPredictionHorizon
	%
	tImplicitCO2Controller.ComputeControlInputs();
	%
	tImplicitCO2Controller.tSimulation.afInputsMatrix(:,iTimeStep)					...
			=  tImplicitCO2Controller.afOptimizationProblemSolution(iTimeStep);
	%
	cd Comparisons\
	SimulationImplicitCO2
	cd ..
	%
	tImplicitCO2Controller.tSimulation.afCurrentState						...
		= tImplicitCO2Controller.tSimulation.aafStatesMatrix(:,iTimeStep );
	%
	tImplicitCO2Controller.afRequestedMassFlowOverPredictionHorizon(iTimeStep) = tImplicitCO2Controller.tSimulation.afInputsMatrix(:,iTimeStep)/tImplicitCO2Controller.tSimulation.aafStatesMatrix(:,iTimeStep);
end;%
