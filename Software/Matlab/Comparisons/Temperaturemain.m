clc
clear all
close all

% to get the updated models
addpath(genpath('Models/'));
addpath(genpath('C:\Users\Luca\Documents\GitHub\OpenTestbed\Software\Matlab\Comparisons'));
addpath(genpath('C:/Program Files/IBM/ILOG/CPLEX_Studio125/cplex'));

load('SavedData/TemperatureScenario.mat')
iChoosenDisturbance = randi(1000,1,1);
for i = 1:24
	W(:,i) = aafDisturbancesScenarioMatrix(7*(i-1)+1:i*7,iChoosenDisturbance);
end
tTemperatureControllerParameters								= Controller.LoadStochasticTemperatureMPCParameters();
tImplicitTemperatureController									= Controller.StochasticTemperatureComparisonMPC( tTemperatureControllerParameters );
tTemperatureControllerParameters								= Controller.LoadExplicitTemperatureMPCParameters();
tExplicitTemperatureController									= Controller.ExplicitWCTemperatureMPC( tTemperatureControllerParameters );

tImplicitTemperatureController.afLowerBoundForTheVentilation	= repmat(0.14, 1, tImplicitTemperatureController.iPredictionHorizon);
tImplicitTemperatureController.fSamplingTimeInSeconds			= 30*60;	
tImplicitTemperatureController.iPredictionHorizon				= 24;		
tImplicitTemperatureController.iNumberOfScenarios				= 1000 ;
fInitialCondition												= 23;

BuildingMatrixUnix;
ImplicitEvaluation
ExplicitEvaluation

tExplicitTemperatureController.Postprocessing();
tImplicitTemperatureController.Postprocessing();

N = tExplicitTemperatureController.iPredictionHorizon;


tImplicitTemperatureController.tSimulation.afInputsMatrix		= tImplicitTemperatureController.tSimulation.afInputsMatrix(:,1:N);
tExplicitTemperatureController.tSimulation.afInputsMatrix		= tExplicitTemperatureController.tSimulation.afInputsMatrix(:,1:N);

tImplicitTemperatureController.tSimulation.afOutputVector		= C	* tImplicitTemperatureController.tSimulation.aafStatesMatrix;
tExplicitTemperatureController.tSimulation.afOutputVector		= C	* tExplicitTemperatureController.tSimulation.aafStatesMatrix;

PlotImpExp

tExplicitTemperatureController.EnergyComputation();
tImplicitTemperatureController.EnergyComputation();