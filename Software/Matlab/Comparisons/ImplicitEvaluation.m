%% Implicit Evaluation

tImplicitTemperatureController.tModel.afCurrentState					= fInitialCondition*ones(13,1);
tImplicitTemperatureController.tModel.aafDisturbancesScenarioMatrix		= aafDisturbancesScenarioMatrix;



aafStatesMatrixImplicit													...	
	= zeros(	13,														...
				tImplicitTemperatureController.iPredictionHorizon + 1);
tImplicitTemperatureControll.tSimulation.afInputsMatrix													...
	= zeros(	5,														...
				tImplicitTemperatureController.iPredictionHorizon);
tImplicitTemperatureController.tSimulation.aafStatesMatrix(:,1)											... 
	= tImplicitTemperatureController.tModel.afCurrentState;

for iTimeStep = 1:tImplicitTemperatureController.iPredictionHorizon
	%
	tImplicitTemperatureController.ComputeControlInputs();
	%
	tImplicitTemperatureController.tSimulation.afInputsMatrix(:,iTimeStep)													...
			= [		tImplicitTemperatureController.afOptimizationProblemSolution(1);		...
					tImplicitTemperatureController.afOptimizationProblemSolution(2);		...
					tImplicitTemperatureController.afOptimizationProblemSolution(3);		...
					tImplicitTemperatureController.afOptimizationProblemSolution(4);		...
					tImplicitTemperatureController.afOptimizationProblemSolution(5); 		...
				];
	%
	Simulation
	%
	tImplicitTemperatureController.tModel.afCurrentState						...
		= tImplicitTemperatureController.tSimulation.aafStatesMatrix(:,iTimeStep );
end;%
